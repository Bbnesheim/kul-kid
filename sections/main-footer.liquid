{% assign footer_id = section.id | replace: '_', '' | downcase %}
{% assign default_gradient_colors = '#ff6b6b,#4ecdc4,#45b7d1,#96ceb4,#feca57,#ff9ff3,#54a0ff' | split: ',' %}
{% assign gradient_colors = '' %}
{% for default_color in default_gradient_colors %}
  {% assign color_key = 'gradient_color_' | append: forloop.index %}
  {% assign color_value = section.settings[color_key] | default: default_color %}
  {% if gradient_colors != '' %}
    {% assign gradient_colors = gradient_colors | append: ', ' %}
  {% endif %}
  {% assign gradient_colors = gradient_colors | append: color_value %}
{% endfor %}
{% assign gradient_speed = section.settings.gradient_speed | default: 18 %}
{% assign static_bg_color = section.settings.static_bg_color | default: '#334fb4' %}
{% assign text_color = section.settings.master_text_color | default: '#000000' %}
{% assign policy_padding_preset = section.settings.policies_padding_preset | default: 'default' %}
{% assign policy_padding_value = section.settings.policies_side_padding | default: 12 | plus: 0 %}
{% assign policy_padding_mobile_value = section.settings.policies_side_padding_mobile %}
{% case policy_padding_preset %}
  {% when 'compact' %}
    {% assign policy_padding_value = 60 %}
  {% when 'narrow' %}
    {% assign policy_padding_value = 120 %}
  {% when 'extra_narrow' %}
    {% assign policy_padding_value = 180 %}
  {% when 'custom' %}
    {% assign policy_padding_value = section.settings.policies_side_padding | default: 12 | plus: 0 %}
  {% else %}
    {% assign policy_padding_value = 12 %}
{% endcase %}
{% if policy_padding_mobile_value == blank %}
  {% assign policy_padding_mobile_value = policy_padding_value %}
{% else %}
  {% assign policy_padding_mobile_value = policy_padding_mobile_value | plus: 0 %}
{% endif %}

{{- 'kk-section-footer.css' | asset_url | stylesheet_tag -}}
{{- 'kk-component-footer-newsletter.css' | asset_url | stylesheet_tag -}}
{{- 'kk-component-footer-social.css' | asset_url | stylesheet_tag -}}
{{- 'kk-component-footer-links.css' | asset_url | stylesheet_tag -}}
{{- 'kk-component-footer-payments.css' | asset_url | stylesheet_tag -}}

{%- style -%}
  .kk-footer-{{ section.id }} {
    --kk-footer-text-color: {{ text_color }};
    --kk-footer-section-spacing: {{ section.settings.section_spacing }}px;
    --kk-footer-copyright-spacing: {{ section.settings.copyright_top_margin }}px;
    padding-top: {{ section.settings.padding_top }}px;
    padding-bottom: {{ section.settings.padding_bottom }}px;
    padding-left: {{ section.settings.footer_padding }}px;
    padding-right: {{ section.settings.footer_padding }}px;
    {% if section.settings.enable_gradient %}
      background: linear-gradient(270deg, {{ gradient_colors }});
      background-size: 1200% 1200%;
      animation: rainbowGradient {{ gradient_speed }}s ease infinite;
    {% else %}
      background-color: {{ static_bg_color }};
    {% endif %}
  }

  @media (max-width: 1024px) {
    .kk-footer-{{ section.id }} {
      padding-left: {{ section.settings.footer_padding | times: 0.8 | round }}px;
      padding-right: {{ section.settings.footer_padding | times: 0.8 | round }}px;
      padding-top: {{ section.settings.padding_top | times: 0.8 | round }}px;
      padding-bottom: {{ section.settings.padding_bottom | times: 0.8 | round }}px;
    }
  }

  @media (max-width: 768px) {
    .kk-footer-{{ section.id }} {
      padding-left: {{ section.settings.footer_padding | times: 0.65 | round }}px;
      padding-right: {{ section.settings.footer_padding | times: 0.65 | round }}px;
      padding-top: {{ section.settings.padding_top | times: 0.65 | round }}px;
      padding-bottom: {{ section.settings.padding_bottom | times: 0.65 | round }}px;
    }
  }
{%- endstyle -%}

<section
  class="kk-footer kk-footer-{{ section.id }}"
  role="contentinfo"
  aria-label="{{ section.settings.footer_aria_label | default: 'Kul Kid footer' }}"
>
  <div class="footer__inner">
    {% assign footer_left_newsletter = '' %}
    {% assign footer_left_social = '' %}
    {% assign footer_center_payments = '' %}
    {% assign footer_center_payments_markup = '' %}
    {% assign footer_right_links = '' %}
    {% assign footer_other_blocks = '' %}

    {% for block in section.blocks %}
      {% if block.type == 'social_icon' %}
        {% continue %}
      {% endif %}
      {% assign block_style_attr = '' %}
      {% assign block_extra_class = '' %}
      {% assign normalized_block_type = block.type %}
      {% if block.type == 'newsletter_block' %}
        {% assign normalized_block_type = 'newsletter' %}
      {% endif %}
      {% if block.type == 'social_icons' or block.type == 'social' %}
        {% assign social_spacing_bottom_setting = block.settings.social_spacing_bottom | default: 32 | plus: 0 %}
        {% assign block_style_attr = ' style="--footer-social-block-spacing: ' | append: social_spacing_bottom_setting | append: 'px;"' %}
        {% assign block_extra_class = ' footer-social' %}
      {% endif %}
      {% capture block_markup %}
        <div class="footer__block footer__block--{{ normalized_block_type }}{{ block_extra_class }}"{% if block_style_attr != '' %}{{ block_style_attr }}{% endif %} {{ block.shopify_attributes }}>
          {% case normalized_block_type %}
            {% when 'newsletter' %}
              {% assign heading_size = block.settings.heading_font_size | default: 28 | plus: 0 %}
              {% assign description_size = block.settings.description_font_size | default: 16 | plus: 0 %}
              {% assign button_size = block.settings.button_font_size | default: 15 | plus: 0 %}
              {% assign newsletter_padding_top = block.settings.newsletter_padding_top | default: 24 | plus: 0 %}
              {% assign newsletter_padding_bottom = block.settings.newsletter_padding_bottom | default: 24 | plus: 0 %}
              {% assign newsletter_padding_side = block.settings.newsletter_padding_side | default: 24 | plus: 0 %}
              {% assign club_icon_width = block.settings.club_icon_width | default: 160 | plus: 0 %}
              {% assign club_icon_width_mobile = block.settings.club_icon_width_mobile %}
              {% if club_icon_width_mobile == blank %}
                {% assign club_icon_width_mobile = club_icon_width %}
              {% else %}
                {% assign club_icon_width_mobile = club_icon_width_mobile | plus: 0 %}
              {% endif %}
              {% assign icon_gap = club_icon_width | times: 0.12 | round: 0 %}
              {% assign icon_gap = icon_gap | at_least: 12 %}
              {% assign icon_gap = icon_gap | at_most: 28 %}
              {% assign newsletter_form_max_width = block.settings.newsletter_form_max_width | default: 520 | plus: 0 %}
              {% assign action_spacing_desktop = block.settings.action_spacing_desktop | default: 16 | plus: 0 %}
              {% assign action_spacing_mobile = block.settings.action_spacing_mobile %}
              {% if action_spacing_mobile == blank %}
                {% assign action_spacing_mobile = action_spacing_desktop %}
              {% else %}
                {% assign action_spacing_mobile = action_spacing_mobile | plus: 0 %}
              {% endif %}

              <div
                class="footer__newsletter"
                style="--newsletter-action-spacing: {{ action_spacing_desktop }}px; --newsletter-action-spacing-mobile: {{ action_spacing_mobile }}px;"
              >
              <div
                  class="footer-newsletter__card"
                  style="padding: {{ newsletter_padding_top }}px {{ newsletter_padding_side }}px {{ newsletter_padding_bottom }}px; --newsletter-icon-width: {{ club_icon_width }}px; --newsletter-icon-mobile-width: {{ club_icon_width_mobile }}px; --newsletter-icon-gap: {{ icon_gap }}px; --newsletter-icon-top: {{ newsletter_padding_top }}px;"
                >
                  <div class="footer-newsletter__body{% if block.settings.club_icon != blank %} footer-newsletter__body--with-image{% endif %}">
                    <div class="footer-newsletter__content{% if block.settings.club_icon != blank %} footer-newsletter__content--with-image{% endif %}">
                      {% if block.settings.heading != blank %}
                        <h2 class="footer__heading" style="--footer-heading-size: {{ heading_size }}px;">{{ block.settings.heading }}</h2>
                      {% endif %}
                      {% if block.settings.description != blank %}
                        <div class="footer__newsletter-copy" style="--footer-text-size: {{ description_size }}px;">{{ block.settings.description }}</div>
                      {% endif %}
                    </div>

                    {% if block.settings.club_icon != blank %}
                      <div class="footer-newsletter__media">
                        <img
                          src="{{ block.settings.club_icon | image_url: width: club_icon_width }}"
                          alt="{{ block.settings.club_icon_alt | escape }}"
                          width="{{ club_icon_width }}"
                          class="footer-newsletter__image"
                          loading="eager"
                          decoding="auto"
                        >
                      </div>
                    {% endif %}
                  </div>

                  {% form 'customer', id: 'ContactFooter', class: 'footer__newsletter-form footer-newsletter__form' %}
                    <input type="hidden" name="contact[tags]" value="newsletter">

                    <div class="newsletter-row">
                      <div class="field">
                        <input
                          id="ContactFooter-email"
                          type="email"
                          name="contact[email]"
                          value="{{ form.email }}"
                          placeholder="{{ block.settings.email_placeholder | default: 'Din e-postadresse' }}"
                          autocapitalize="off"
                          autocomplete="email"
                          spellcheck="false"
                          {% if form.errors %}aria-invalid="true" aria-describedby="ContactFooter-error" autofocus{% elsif form.posted_successfully? %}aria-describedby="ContactFooter-success"{% endif %}
                          required
                        >
                        <label class="visually-hidden" for="ContactFooter-email">Din e-postadresse</label>
                        <button
                          type="submit"
                          class="footer__button footer-newsletter__button"
                          style="--footer-button-size: {{ button_size }}px;"
                          aria-label="{{ block.settings.button_text | default: 'Få 15% nå' }}"
                        >
                          {{ block.settings.button_text | default: 'Få 15% nå' }}
                        </button>
                      </div>

                      {% if form.errors %}
                        <small class="footer__newsletter-feedback footer__newsletter-feedback--error" id="ContactFooter-error" data-newsletter-error data-newsletter-error-text>
                          {{- form.errors.translated_fields.email | capitalize }} {{ form.errors.messages.email -}}
                        </small>
                      {% endif %}

                      {% if form.posted_successfully? %}
                        <h3 class="footer__newsletter-feedback footer__newsletter-feedback--success" id="ContactFooter-success" tabindex="-1" autofocus data-newsletter-success data-newsletter-success-text>
                          {{ block.settings.success_message | default: section.settings.newsletter_success_fallback }}
                        </h3>
                      {% endif %}
                    </div>
                  {% endform %}
                </div>
              </div>

            {% when 'link_group' %}
              {% assign heading_size = block.settings.heading_size | default: 20 | plus: 0 %}
              {% assign link_size = block.settings.link_size | default: 15 | plus: 0 %}
              {% assign link_group_heading = block.settings.heading | default: 'Lenker' %}
              {% assign link_gap = block.settings.link_spacing | default: 12 | plus: 0 %}
              {% assign link_group_id = 'footer-links-' | append: block.id %}

              <div class="footer__link-group" data-footer-accordion>
                <button
                  class="footer__link-group-toggle"
                  type="button"
                  data-footer-accordion-toggle
                  aria-expanded="true"
                  aria-controls="{{ link_group_id }}"
                  role="heading"
                  aria-level="2"
                  style="--footer-heading-size: {{ heading_size }}px;"
                >
                  <span class="footer__link-group-title">{{ link_group_heading }}</span>
                  <span class="footer__link-group-icon" aria-hidden="true">
                    {{- 'icon-caret.svg' | inline_asset_content -}}
                  </span>
                </button>
                <div
                  class="footer__link-group-panel"
                  id="{{ link_group_id }}"
                  data-footer-accordion-panel
                >
                  <ul class="footer__list" style="--footer-link-size: {{ link_size }}px; --footer-link-gap: {{ link_gap }}px;">
                    {% assign menu_handle = block.settings.menu %}
                    {% if menu_handle != blank and linklists[menu_handle] and linklists[menu_handle].links.size > 0 %}
                      {% for link in linklists[menu_handle].links %}
                        <li><a class="footer__link" href="{{ link.url }}">{{ link.title }}</a></li>
                      {% endfor %}
                    {% elsif block.settings.show_all_collections %}
                      {% assign rendered_collections = 0 %}
                      {% for collection in collections %}
                        {% if collection == blank or collection.all_products_count == 0 %}
                          {% continue %}
                        {% endif %}
                        <li><a class="footer__link" href="{{ collection.url }}">{{ collection.title }}</a></li>
                        {% assign rendered_collections = rendered_collections | plus: 1 %}
                        {% if rendered_collections >= block.settings.collection_limit %}
                          {% break %}
                        {% endif %}
                      {% endfor %}
                    {% else %}
                      <li><span class="footer__text" style="--footer-text-size: {{ link_size }}px;">Velg en meny for å vise lenker i denne kolonnen.</span></li>
                    {% endif %}
                    {% if block.settings.view_all_label != blank and block.settings.view_all_url != blank %}
                      <li><a class="footer__link" href="{{ block.settings.view_all_url }}">{{ block.settings.view_all_label }}</a></li>
                    {% endif %}
                  </ul>
                </div>
              </div>

            {% when 'social_icons', 'social' %}
              {% assign heading_size = block.settings.heading_size | default: 20 | plus: 0 %}
              {% assign icon_size = block.settings.social_icon_size | default: 28 | plus: 0 %}
              {% assign icon_gap = block.settings.social_icon_gap | default: 12 | plus: 0 %}
              {% assign icon_size_mobile = block.settings.social_icon_size_mobile %}
              {% if icon_size_mobile == blank %}
                {% assign icon_size_mobile = icon_size %}
              {% else %}
                {% assign icon_size_mobile = icon_size_mobile | plus: 0 %}
              {% endif %}
              {% assign icon_gap_mobile = block.settings.social_icon_gap_mobile %}
              {% if icon_gap_mobile == blank %}
                {% assign icon_gap_mobile = icon_gap %}
              {% else %}
                {% assign icon_gap_mobile = icon_gap_mobile | plus: 0 %}
              {% endif %}
              {% assign icon_render_width = icon_size | times: 3 %}
              {% if icon_render_width < icon_size %}
                {% assign icon_render_width = icon_size %}
              {% endif %}
              {% assign icon_render_width = icon_render_width | round %}
              {% assign fallback_size = heading_size | minus: 4 %}
              {% if fallback_size < 12 %}
                {% assign fallback_size = 12 %}
              {% endif %}
              {% assign social_icon_blocks = section.blocks | where: 'type', 'social_icon' %}

              {% if block.settings.heading != blank %}
                <h2 class="footer__heading" style="--footer-heading-size: {{ heading_size }}px;">{{ block.settings.heading }}</h2>
              {% endif %}

              {% if social_icon_blocks.size > 0 %}
                <div class="footer__social" style="--footer-social-size: {{ icon_size }}px; --footer-social-gap: {{ icon_gap }}px; --footer-social-size-mobile: {{ icon_size_mobile }}px; --footer-social-gap-mobile: {{ icon_gap_mobile }}px;">
                  {% assign rendered_icons = 0 %}
                  {% for icon_block in social_icon_blocks %}
                    {% assign platform = icon_block.settings.platform | default: 'custom' %}
                    {% assign fallback_url = '' %}
                    {% case platform %}
                      {% when 'instagram' %}
                        {% assign fallback_url = block.settings.instagram_link | default: block.settings.instagram_url %}
                      {% when 'facebook' %}
                        {% assign fallback_url = block.settings.facebook_link | default: block.settings.facebook_url %}
                      {% when 'tiktok' %}
                        {% assign fallback_url = block.settings.tiktok_link | default: block.settings.tiktok_url %}
                      {% when 'spotify' %}
                        {% assign fallback_url = block.settings.spotify_link | default: block.settings.spotify_url %}
                      {% when 'youtube' %}
                        {% assign fallback_url = block.settings.youtube_link %}
                      {% else %}
                        {% assign fallback_url = '' %}
                    {% endcase %}
                    {% assign icon_url = icon_block.settings.link | default: icon_block.settings.url | default: icon_block.settings.href | default: fallback_url %}
                    {% assign custom_icon = icon_block.settings.custom_icon %}
                    {% assign gradient_enabled = icon_block.settings.enable_gradient %}
                    {% assign platform_label = '' %}
                    {% assign icon_class = platform %}

                    {% case platform %}
                      {% when 'instagram' %}
                        {% assign platform_label = 'Instagram' %}
                      {% when 'facebook' %}
                        {% assign platform_label = 'Facebook' %}
                      {% when 'tiktok' %}
                        {% assign platform_label = 'TikTok' %}
                      {% when 'spotify' %}
                        {% assign platform_label = 'Spotify' %}
                      {% when 'youtube' %}
                        {% assign platform_label = 'YouTube' %}
                      {% else %}
                        {% assign platform_label = 'Sosial kanal' %}
                        {% assign icon_class = 'custom' %}
                    {% endcase %}

                    {% assign rendered_icons = rendered_icons | plus: 1 %}
                    {% if icon_url != blank %}
                      <a
                        class="footer__social-link footer__social-link--{{ icon_class }}"
                        href="{{ icon_url }}"
                        target="_blank"
                        rel="noopener noreferrer"
                        aria-label="{{ platform_label }}"
                        data-gradient="{% if gradient_enabled %}true{% else %}false{% endif %}"
                      >
                        <span class="visually-hidden">Følg {{ shop.name }} på {{ platform_label }}</span>
                        {% if custom_icon != blank %}
                          {% assign custom_icon_asset = custom_icon | image_url: width: icon_render_width %}
                          {% if custom_icon_asset == blank %}
                            {% assign custom_icon_asset = custom_icon | file_url %}
                          {% endif %}
                          {% if custom_icon_asset != blank %}
                            <img
                              src="{{ custom_icon_asset }}"
                              alt="{{ platform_label }}"
                              class="footer__icon"
                              loading="lazy"
                              decoding="async"
                            >
                          {% else %}
                            {% render 'icon-external-link' %}
                          {% endif %}
                        {% else %}
                          {% case platform %}
                            {% when 'instagram' %}{% render 'icon-instagram' %}
                            {% when 'facebook' %}{% render 'icon-facebook' %}
                            {% when 'tiktok' %}{% render 'icon-tiktok' %}
                            {% when 'spotify' %}{% render 'icon-spotify' %}
                            {% when 'youtube' %}{% render 'icon-youtube' %}
                            {% else %}{% render 'icon-external-link' %}
                          {% endcase %}
                        {% endif %}
                      </a>
                    {% else %}
                      <span
                        class="footer__social-link footer__social-link--{{ icon_class }} footer__social-link--static"
                        aria-label="{{ platform_label }}"
                      >
                        {% if custom_icon != blank %}
                          {% assign custom_icon_asset = custom_icon | image_url: width: icon_render_width %}
                          {% if custom_icon_asset == blank %}
                            {% assign custom_icon_asset = custom_icon | file_url %}
                          {% endif %}
                          {% if custom_icon_asset != blank %}
                            <img
                              src="{{ custom_icon_asset }}"
                              alt="{{ platform_label }}"
                              class="footer__icon"
                              loading="lazy"
                              decoding="async"
                            >
                          {% else %}
                            {% render 'icon-external-link' %}
                          {% endif %}
                        {% else %}
                          {% case platform %}
                            {% when 'instagram' %}{% render 'icon-instagram' %}
                            {% when 'facebook' %}{% render 'icon-facebook' %}
                            {% when 'tiktok' %}{% render 'icon-tiktok' %}
                            {% when 'spotify' %}{% render 'icon-spotify' %}
                            {% when 'youtube' %}{% render 'icon-youtube' %}
                            {% else %}{% render 'icon-external-link' %}
                          {% endcase %}
                        {% endif %}
                      </span>
                    {% endif %}
                  {% endfor %}

                  {% if rendered_icons == 0 %}
                    <span class="footer__text" style="--footer-text-size: {{ fallback_size }}px;">Legg til lenker for Instagram, Facebook, TikTok, Spotify eller YouTube i blokkinnstillingene.</span>
                  {% endif %}
                </div>
              {% else %}
                {% assign instagram_link = block.settings.instagram_link | default: block.settings.instagram_url %}
                {% assign facebook_link = block.settings.facebook_link | default: block.settings.facebook_url %}
                {% assign tiktok_link = block.settings.tiktok_link | default: block.settings.tiktok_url %}
                {% assign spotify_link = block.settings.spotify_link | default: block.settings.spotify_url %}
                {% assign youtube_link = block.settings.youtube_link %}

                {% assign instagram_icon_pick = block.settings.instagram_icon %}
                {% assign facebook_icon_pick = block.settings.facebook_icon %}
                {% assign tiktok_icon_pick = block.settings.tiktok_icon %}
                {% assign spotify_icon_pick = block.settings.spotify_icon %}
                {% assign youtube_icon_pick = block.settings.youtube_icon %}

                {% assign instagram_icon_url = blank %}
                {% assign facebook_icon_url = blank %}
                {% assign tiktok_icon_url = blank %}
                {% assign spotify_icon_url = blank %}
                {% assign youtube_icon_url = blank %}

                {% if instagram_icon_pick != blank %}
                  {% assign instagram_icon_url = instagram_icon_pick | image_url: width: icon_render_width %}
                  {% if instagram_icon_url == blank %}
                    {% assign instagram_icon_url = instagram_icon_pick | file_url %}
                  {% endif %}
                {% endif %}
                {% if facebook_icon_pick != blank %}
                  {% assign facebook_icon_url = facebook_icon_pick | image_url: width: icon_render_width %}
                  {% if facebook_icon_url == blank %}
                    {% assign facebook_icon_url = facebook_icon_pick | file_url %}
                  {% endif %}
                {% endif %}
                {% if tiktok_icon_pick != blank %}
                  {% assign tiktok_icon_url = tiktok_icon_pick | image_url: width: icon_render_width %}
                  {% if tiktok_icon_url == blank %}
                    {% assign tiktok_icon_url = tiktok_icon_pick | file_url %}
                  {% endif %}
                {% endif %}
                {% if spotify_icon_pick != blank %}
                  {% assign spotify_icon_url = spotify_icon_pick | image_url: width: icon_render_width %}
                  {% if spotify_icon_url == blank %}
                    {% assign spotify_icon_url = spotify_icon_pick | file_url %}
                  {% endif %}
                {% endif %}
                {% if youtube_icon_pick != blank %}
                  {% assign youtube_icon_url = youtube_icon_pick | image_url: width: icon_render_width %}
                  {% if youtube_icon_url == blank %}
                    {% assign youtube_icon_url = youtube_icon_pick | file_url %}
                  {% endif %}
                {% endif %}

                {% assign instagram_has_icon = instagram_icon_url %}
                {% assign facebook_has_icon = facebook_icon_url %}
                {% assign tiktok_has_icon = tiktok_icon_url %}
                {% assign spotify_has_icon = spotify_icon_url %}
                {% assign youtube_has_icon = youtube_icon_url %}

                {% assign has_social = false %}

                <div class="footer__social" style="--footer-social-size: {{ icon_size }}px; --footer-social-gap: {{ icon_gap }}px; --footer-social-size-mobile: {{ icon_size_mobile }}px; --footer-social-gap-mobile: {{ icon_gap_mobile }}px;">
                  {% if instagram_link != blank or instagram_has_icon %}
                    {% assign has_social = true %}
                    {% if instagram_link != blank %}
                      <a
                        class="footer__social-link footer__social-link--instagram"
                        href="{{ instagram_link }}"
                        target="_blank"
                        rel="noopener noreferrer"
                        aria-label="Instagram"
                      >
                        <span class="visually-hidden">Følg {{ shop.name }} på Instagram</span>
                    {% else %}
                      <span class="footer__social-link footer__social-link--instagram footer__social-link--static" aria-label="Instagram">
                    {% endif %}
                      {% if instagram_has_icon %}
                        <img src="{{ instagram_icon_url }}" alt="Instagram" class="footer__icon" loading="lazy" decoding="async">
                      {% else %}
                        {% render 'icon-instagram' %}
                      {% endif %}
                    {% if instagram_link != blank %}
                      </a>
                    {% else %}
                      </span>
                    {% endif %}
                  {% endif %}

                  {% if facebook_link != blank or facebook_has_icon %}
                    {% assign has_social = true %}
                    {% if facebook_link != blank %}
                      <a
                        class="footer__social-link footer__social-link--facebook"
                        href="{{ facebook_link }}"
                        target="_blank"
                        rel="noopener noreferrer"
                        aria-label="Facebook"
                      >
                        <span class="visually-hidden">Følg {{ shop.name }} på Facebook</span>
                    {% else %}
                      <span class="footer__social-link footer__social-link--facebook footer__social-link--static" aria-label="Facebook">
                    {% endif %}
                      {% if facebook_has_icon %}
                        <img src="{{ facebook_icon_url }}" alt="Facebook" class="footer__icon" loading="lazy" decoding="async">
                      {% else %}
                        {% render 'icon-facebook' %}
                      {% endif %}
                    {% if facebook_link != blank %}
                      </a>
                    {% else %}
                      </span>
                    {% endif %}
                  {% endif %}

                  {% if tiktok_link != blank or tiktok_has_icon %}
                    {% assign has_social = true %}
                    {% if tiktok_link != blank %}
                      <a
                        class="footer__social-link footer__social-link--tiktok"
                        href="{{ tiktok_link }}"
                        target="_blank"
                        rel="noopener noreferrer"
                        aria-label="TikTok"
                      >
                        <span class="visually-hidden">Følg {{ shop.name }} på TikTok</span>
                    {% else %}
                      <span class="footer__social-link footer__social-link--tiktok footer__social-link--static" aria-label="TikTok">
                    {% endif %}
                      {% if tiktok_has_icon %}
                        <img src="{{ tiktok_icon_url }}" alt="TikTok" class="footer__icon" loading="lazy" decoding="async">
                      {% else %}
                        {% render 'icon-tiktok' %}
                      {% endif %}
                    {% if tiktok_link != blank %}
                      </a>
                    {% else %}
                      </span>
                    {% endif %}
                  {% endif %}

                  {% if spotify_link != blank or spotify_has_icon %}
                    {% assign has_social = true %}
                    {% if spotify_link != blank %}
                      <a
                        class="footer__social-link footer__social-link--spotify"
                        href="{{ spotify_link }}"
                        target="_blank"
                        rel="noopener noreferrer"
                        aria-label="Spotify"
                      >
                        <span class="visually-hidden">Følg {{ shop.name }} på Spotify</span>
                    {% else %}
                      <span class="footer__social-link footer__social-link--spotify footer__social-link--static" aria-label="Spotify">
                    {% endif %}
                      {% if spotify_has_icon %}
                        <img src="{{ spotify_icon_url }}" alt="Spotify" class="footer__icon" loading="lazy" decoding="async">
                      {% else %}
                        {% render 'icon-spotify' %}
                      {% endif %}
                    {% if spotify_link != blank %}
                      </a>
                    {% else %}
                      </span>
                    {% endif %}
                  {% endif %}

                  {% if youtube_link != blank or youtube_has_icon %}
                    {% assign has_social = true %}
                    {% if youtube_link != blank %}
                      <a
                        class="footer__social-link footer__social-link--youtube"
                        href="{{ youtube_link }}"
                        target="_blank"
                        rel="noopener noreferrer"
                        aria-label="YouTube"
                      >
                        <span class="visually-hidden">Følg {{ shop.name }} på YouTube</span>
                    {% else %}
                      <span class="footer__social-link footer__social-link--youtube footer__social-link--static" aria-label="YouTube">
                    {% endif %}
                      {% if youtube_has_icon %}
                        <img src="{{ youtube_icon_url }}" alt="YouTube" class="footer__icon" loading="lazy" decoding="async">
                      {% else %}
                        {% render 'icon-youtube' %}
                      {% endif %}
                    {% if youtube_link != blank %}
                      </a>
                    {% else %}
                      </span>
                    {% endif %}
                  {% endif %}

                  {% unless has_social %}
                    <span class="footer__text" style="--footer-text-size: {{ fallback_size }}px;">Legg til lenker for Instagram, Facebook, TikTok, Spotify eller YouTube i blokkinnstillingene.</span>
                  {% endunless %}
                </div>
              {% endif %}

            {% when 'payments' %}
              {% assign heading_size = block.settings.heading_size | default: 20 | plus: 0 %}
              {% assign icon_height = block.settings.icon_height | default: 28 | plus: 0 %}
              {% assign payment_gap = block.settings.payments_icon_gap | default: 12 | plus: 0 %}
              {% assign icon_height_mobile = block.settings.icon_height_mobile %}
              {% if icon_height_mobile == blank %}
                {% assign icon_height_mobile = icon_height %}
              {% else %}
                {% assign icon_height_mobile = icon_height_mobile | plus: 0 %}
              {% endif %}
              {% assign payment_gap_mobile = block.settings.payments_icon_gap_mobile %}
              {% if payment_gap_mobile == blank %}
                {% assign payment_gap_mobile = payment_gap %}
              {% else %}
                {% assign payment_gap_mobile = payment_gap_mobile | plus: 0 %}
              {% endif %}
              {% assign empty_state_size = heading_size | minus: 4 %}
              {% if empty_state_size < 12 %}
                {% assign empty_state_size = 12 %}
              {% endif %}
              {% assign payments_spacing_bottom = block.settings.payments_spacing_bottom | default: 24 | plus: 0 %}

              {% if block.settings.heading != blank %}
                <h2 class="footer__heading" style="--footer-heading-size: {{ heading_size }}px;">{{ block.settings.heading }}</h2>
              {% endif %}
              {% assign render_payment_icon = 0 %}
              {% assign show_visa_icon = block.settings.show_visa %}
              {% assign show_mastercard_icon = block.settings.show_mastercard %}
              {% assign show_amex_icon = block.settings.show_amex %}
              {% assign show_paypal_icon = block.settings.show_paypal %}
              {% assign show_apple_pay_icon = block.settings.show_apple_pay %}
              {% assign show_klarna_icon = block.settings.show_klarna %}

              {% if block.settings.visa_icon != blank %}
                {% assign show_visa_icon = true %}
              {% endif %}
              {% if block.settings.mastercard_icon != blank %}
                {% assign show_mastercard_icon = true %}
              {% endif %}
              {% if block.settings.amex_icon != blank %}
                {% assign show_amex_icon = true %}
              {% endif %}
              {% if block.settings.paypal_icon != blank %}
                {% assign show_paypal_icon = true %}
              {% endif %}
              {% if block.settings.apple_pay_icon != blank %}
                {% assign show_apple_pay_icon = true %}
              {% endif %}
              {% if block.settings.klarna_icon != blank %}
                {% assign show_klarna_icon = true %}
              {% endif %}

              <div class="footer-payments footer__payments" style="--footer-payments-size: {{ icon_height }}px; --footer-payments-size-mobile: {{ icon_height_mobile }}px; --social-icon-size: {{ icon_height }}px; --social-icon-size-mobile: {{ icon_height_mobile }}px; --footer-payment-spacing-bottom: {{ payments_spacing_bottom }}px; --footer-payments-gap: {{ payment_gap }}px; --footer-payments-gap-mobile: {{ payment_gap_mobile }}px; --social-icon-gap: {{ payment_gap }}px; --social-icon-gap-mobile: {{ payment_gap_mobile }}px;">
                {% if show_visa_icon %}
                  {% assign render_payment_icon = render_payment_icon | plus: 1 %}
                  <div class="footer__payment-item">
                    {% if block.settings.visa_icon != blank %}
                      <img src="{{ block.settings.visa_icon | image_url }}" alt="Visa" class="footer__icon" loading="eager" decoding="auto">
                    {% else %}
                      {% render 'icon-payment', name: 'visa' %}
                    {% endif %}
                  </div>
                {% endif %}

                {% if show_mastercard_icon %}
                  {% assign render_payment_icon = render_payment_icon | plus: 1 %}
                  <div class="footer__payment-item">
                    {% if block.settings.mastercard_icon != blank %}
                      <img src="{{ block.settings.mastercard_icon | image_url }}" alt="Mastercard" class="footer__icon" loading="eager" decoding="auto">
                    {% else %}
                      {% render 'icon-payment', name: 'mastercard' %}
                    {% endif %}
                  </div>
                {% endif %}

                {% if show_amex_icon %}
                  {% assign render_payment_icon = render_payment_icon | plus: 1 %}
                  <div class="footer__payment-item">
                    {% if block.settings.amex_icon != blank %}
                      <img src="{{ block.settings.amex_icon | image_url }}" alt="American Express" class="footer__icon" loading="eager" decoding="auto">
                    {% else %}
                      {% render 'icon-payment', name: 'amex' %}
                    {% endif %}
                  </div>
                {% endif %}

                {% if show_paypal_icon %}
                  {% assign render_payment_icon = render_payment_icon | plus: 1 %}
                  <div class="footer__payment-item">
                    {% if block.settings.paypal_icon != blank %}
                      <img src="{{ block.settings.paypal_icon | image_url }}" alt="PayPal" class="footer__icon" loading="eager" decoding="auto">
                    {% else %}
                      {% render 'icon-payment', name: 'paypal' %}
                    {% endif %}
                  </div>
                {% endif %}

                {% if show_apple_pay_icon %}
                  {% assign render_payment_icon = render_payment_icon | plus: 1 %}
                  <div class="footer__payment-item">
                    {% if block.settings.apple_pay_icon != blank %}
                      <img src="{{ block.settings.apple_pay_icon | image_url }}" alt="Apple Pay" class="footer__icon" loading="eager" decoding="auto">
                    {% else %}
                      {% render 'icon-payment', name: 'apple_pay' %}
                    {% endif %}
                  </div>
                {% endif %}

                {% if show_klarna_icon %}
                  {% assign render_payment_icon = render_payment_icon | plus: 1 %}
                  <div class="footer__payment-item">
                    {% if block.settings.klarna_icon != blank %}
                      <img src="{{ block.settings.klarna_icon | image_url }}" alt="Klarna" class="footer__icon" loading="eager" decoding="auto">
                    {% else %}
                      {% render 'icon-payment', name: 'klarna' %}
                    {% endif %}
                  </div>
                {% endif %}

                {% if block.settings.custom_payment_svg != blank %}
                  {% assign render_payment_icon = render_payment_icon | plus: 1 %}
                  <div class="footer__payment-item">
                    <img src="{{ block.settings.custom_payment_svg | image_url }}" alt="{{ block.settings.custom_payment_label | default: 'Tilleggsbetaling' | escape }}" class="footer__icon" loading="eager" decoding="auto">
                  </div>
                {% endif %}

                {% if render_payment_icon == 0 %}
                  <span class="footer__text" style="--footer-text-size: {{ empty_state_size }}px;">Aktiver betalingsikoner i blokkinnstillingene.</span>
                {% endif %}
              </div>
          {% endcase %}
        </div>
      {% endcapture %}

      {% case normalized_block_type %}
        {% when 'newsletter' %}
          {% capture footer_left_newsletter %}{{ footer_left_newsletter }}{{ block_markup }}{% endcapture %}
        {% when 'social_icons' %}
          {% capture footer_left_social %}{{ footer_left_social }}{{ block_markup }}{% endcapture %}
        {% when 'social' %}
          {% capture footer_left_social %}{{ footer_left_social }}{{ block_markup }}{% endcapture %}
        {% when 'payments' %}
          {% capture footer_center_payments %}{{ footer_center_payments }}{{ block_markup }}{% endcapture %}
        {% when 'link_group' %}
          {% capture footer_right_links %}{{ footer_right_links }}{{ block_markup }}{% endcapture %}
        {% else %}
          {% capture footer_other_blocks %}{{ footer_other_blocks }}{{ block_markup }}{% endcapture %}
      {% endcase %}
    {% endfor %}

    {% assign footer_left_content = footer_left_newsletter | append: footer_left_social %}
    {% assign footer_left_content = footer_left_content | strip %}
    {% assign footer_right_content = footer_right_links | append: footer_other_blocks %}
    {% assign footer_right_content = footer_right_content | strip %}
    {% assign footer_layout_classes = 'footer__layout' %}
    {% if footer_left_content == '' or footer_right_content == '' %}
      {% assign footer_layout_classes = footer_layout_classes | append: ' footer__layout--single-column' %}
    {% endif %}

    {% if footer_left_content != '' or footer_right_content != '' %}
      <div class="{{ footer_layout_classes }}">
        {% if footer_left_content != '' %}
          <div class="footer__column footer__column--left">
            {{ footer_left_newsletter }}
            {{ footer_left_social }}
          </div>
        {% endif %}
        {% if footer_right_content != '' %}
          <div class="footer__column footer__column--right">
            {% if footer_right_links != '' %}
              <div class="footer__link-columns">
                {{ footer_right_links }}
              </div>
            {% endif %}
            {{ footer_other_blocks }}
          </div>
        {% endif %}
      </div>
    {% endif %}

    {% if footer_center_payments != '' %}
      {% assign footer_center_payments_markup = footer_center_payments %}
    {% endif %}

    {% if footer_center_payments_markup != '' %}
      <div class="footer__payments-wrapper footer-payments-wrapper">
        {{ footer_center_payments_markup }}
      </div>
    {% endif %}

    <div
      class="footer__policies"
      style="
        --policy-bottom-margin: {{ section.settings.policies_bottom_margin | default: 20 | plus: 0 }}px;
        --policy-gap-desktop: {{ section.settings.policy_gap_desktop | default: 12 | plus: 0 }}px;
        --policy-font-desktop: {{ section.settings.policy_font_size_desktop | default: 14 | plus: 0 }}px;
        --policy-gap-mobile: {{ section.settings.policy_gap_mobile | default: 10 | plus: 0 }}px;
        --policy-font-mobile: {{ section.settings.policy_font_size_mobile | default: 12 | plus: 0 }}px;
        --policy-padding-inline: {{ policy_padding_value | plus: 0 }}px;
        --policy-padding-inline-mobile: {{ policy_padding_mobile_value | plus: 0 }}px;
      "
    >
      {% assign policy_count = 0 %}

      {% if shop.privacy_policy %}
        <a href="{{ shop.privacy_policy.url }}">{{ shop.privacy_policy.title }}</a>
        {% assign policy_count = policy_count | plus: 1 %}
      {% endif %}

      {% if shop.terms_of_service %}
        {% if policy_count > 0 %}<span class="footer__policy-separator">•</span>{% endif %}
        <a href="{{ shop.terms_of_service.url }}">{{ shop.terms_of_service.title }}</a>
        {% assign policy_count = policy_count | plus: 1 %}
      {% endif %}

      {% if shop.refund_policy %}
        {% if policy_count > 0 %}<span class="footer__policy-separator">•</span>{% endif %}
        <a href="{{ shop.refund_policy.url }}">{{ shop.refund_policy.title }}</a>
        {% assign policy_count = policy_count | plus: 1 %}
      {% endif %}

      {% if shop.shipping_policy %}
        {% if policy_count > 0 %}<span class="footer__policy-separator">•</span>{% endif %}
        <a href="{{ shop.shipping_policy.url }}">{{ shop.shipping_policy.title }}</a>
        {% assign policy_count = policy_count | plus: 1 %}
      {% endif %}

      {% if shop.subscription_policy %}
        {% if policy_count > 0 %}<span class="footer__policy-separator">•</span>{% endif %}
        <a href="{{ shop.subscription_policy.url }}">{{ shop.subscription_policy.title }}</a>
        {% assign policy_count = policy_count | plus: 1 %}
      {% endif %}

      {% if section.settings.cookie_preferences_link != blank %}
        {% if policy_count > 0 %}<span class="footer__policy-separator">•</span>{% endif %}
        <a href="{{ section.settings.cookie_preferences_link }}">{{ section.settings.cookie_preferences_text | default: 'Informasjonskapsler' }}</a>
        {% assign policy_count = policy_count | plus: 1 %}
      {% endif %}

      {% if section.settings.contact_info_link != blank %}
        {% if policy_count > 0 %}<span class="footer__policy-separator">•</span>{% endif %}
        <a href="{{ section.settings.contact_info_link }}">{{ section.settings.contact_info_text | default: 'Kontaktinformasjon' }}</a>
        {% assign policy_count = policy_count | plus: 1 %}
      {% endif %}

      {% if section.settings.legal_notice_link != blank %}
        {% if policy_count > 0 %}<span class="footer__policy-separator">•</span>{% endif %}
        <a href="{{ section.settings.legal_notice_link }}">{{ section.settings.legal_notice_text | default: 'Juridiske retningslinjer' }}</a>
      {% endif %}
    </div>

    <div class="footer__copyright">
      {{ section.settings.copyright_text | default: '© ' | append: shop.name | append: ' ' | append: now | date: '%Y' }}
    </div>
  </div>
</section>

<script>
  (function () {
    const footerSection = document.querySelector('.footer-section-{{ footer_id }}');
    if (!footerSection) return;

    const accordions = footerSection.querySelectorAll('[data-footer-accordion]');
    if (!accordions.length) return;

    const mobileQuery = window.matchMedia('(max-width: 768px)');

    const syncAccordionState = (isMobile) => {
      accordions.forEach((accordion) => {
        const toggle = accordion.querySelector('[data-footer-accordion-toggle]');
        const panel = accordion.querySelector('[data-footer-accordion-panel]');

        if (!toggle || !panel) {
          return;
        }

        if (isMobile) {
          if (!toggle.dataset.footerAccordionMobileInit) {
            toggle.setAttribute('aria-expanded', 'false');
            panel.hidden = true;
            toggle.dataset.footerAccordionMobileInit = 'true';
          }
        } else {
          toggle.setAttribute('aria-expanded', 'true');
          panel.hidden = false;
          delete toggle.dataset.footerAccordionMobileInit;
        }
      });
    };

    const handleAccordionToggle = (event) => {
      if (!mobileQuery.matches) {
        return;
      }

      const toggle = event.currentTarget;
      const accordion = toggle.closest('[data-footer-accordion]');
      const panel = accordion ? accordion.querySelector('[data-footer-accordion-panel]') : null;

      if (!panel) {
        return;
      }

      const isExpanded = toggle.getAttribute('aria-expanded') === 'true';
      toggle.setAttribute('aria-expanded', isExpanded ? 'false' : 'true');
      panel.hidden = isExpanded;
    };

    accordions.forEach((accordion) => {
      const toggle = accordion.querySelector('[data-footer-accordion-toggle]');
      if (!toggle) {
        return;
      }

      toggle.addEventListener('click', handleAccordionToggle);
    });

    const handleMediaChange = (event) => {
      syncAccordionState(event.matches);
    };

    syncAccordionState(mobileQuery.matches);

    if (typeof mobileQuery.addEventListener === 'function') {
      mobileQuery.addEventListener('change', handleMediaChange);
    } else if (typeof mobileQuery.addListener === 'function') {
      mobileQuery.addListener(handleMediaChange);
    }
  })();
</script>

{% schema %}
{
  "name": "KUL KID Main Footer",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "Bakgrunn"
    },
    {
      "type": "checkbox",
      "id": "enable_gradient",
      "label": "Aktiver animert bakgrunn",
      "default": true
    },
    {
      "type": "color",
      "id": "static_bg_color",
      "label": "Statisk bakgrunnsfarge",
      "default": "#334fb4"
    },
    {
      "type": "range",
      "id": "gradient_speed",
      "label": "Animasjonslengde",
      "min": 5,
      "max": 30,
      "step": 1,
      "unit": "s",
      "default": 15
    },
    {
      "type": "range",
      "id": "gradient_direction",
      "label": "Gradientretning",
      "min": 0,
      "max": 360,
      "step": 5,
      "unit": "°",
      "default": 45
    },
    {
      "type": "range",
      "id": "gradient_size",
      "label": "Gradientstørrelse",
      "min": 200,
      "max": 800,
      "step": 50,
      "unit": "%",
      "default": 400
    },
    {
      "type": "color",
      "id": "gradient_color_1",
      "label": "Gradientfarge 1",
      "default": "#ff6b6b"
    },
    {
      "type": "color",
      "id": "gradient_color_2",
      "label": "Gradientfarge 2",
      "default": "#4ecdc4"
    },
    {
      "type": "color",
      "id": "gradient_color_3",
      "label": "Gradientfarge 3",
      "default": "#45b7d1"
    },
    {
      "type": "color",
      "id": "gradient_color_4",
      "label": "Gradientfarge 4",
      "default": "#96ceb4"
    },
    {
      "type": "color",
      "id": "gradient_color_5",
      "label": "Gradientfarge 5",
      "default": "#feca57"
    },
    {
      "type": "color",
      "id": "gradient_color_6",
      "label": "Gradientfarge 6",
      "default": "#ff9ff3"
    },
    {
      "type": "color",
      "id": "gradient_color_7",
      "label": "Gradientfarge 7",
      "default": "#54a0ff"
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "color",
      "id": "master_text_color",
      "label": "Hovedtekstfarge",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding topp",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding bunn",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "default": 40
    },
    {
      "type": "range",
      "id": "footer_padding",
      "label": "Ytre padding",
      "min": 20,
      "max": 120,
      "step": 4,
      "unit": "px",
      "default": 60
    },
    {
      "type": "range",
      "id": "section_spacing",
      "label": "Avstand under innhold",
      "min": 0,
      "max": 60,
      "step": 1,
      "unit": "px",
      "default": 20
    },
    {
      "type": "text",
      "id": "footer_aria_label",
      "label": "Aria-label for footer",
      "default": "Kul Kid footer"
    },
    {
      "type": "header",
      "content": "Retningslinjer"
    },
    {
      "type": "url",
      "id": "cookie_preferences_link",
      "label": "Lenke til informasjonskapsler"
    },
    {
      "type": "text",
      "id": "cookie_preferences_text",
      "label": "Tekst for informasjonskapsler"
    },
    {
      "type": "url",
      "id": "contact_info_link",
      "label": "Lenke til kontaktinformasjon"
    },
    {
      "type": "text",
      "id": "contact_info_text",
      "label": "Tekst for kontaktinformasjon"
    },
    {
      "type": "url",
      "id": "legal_notice_link",
      "label": "Lenke til juridiske retningslinjer"
    },
    {
      "type": "text",
      "id": "legal_notice_text",
      "label": "Tekst for juridiske retningslinjer"
    },
    {
      "type": "range",
      "id": "policies_bottom_margin",
      "label": "Avstand ved policy-rad",
      "min": 10,
      "max": 60,
      "step": 2,
      "unit": "px",
      "default": 20
    },
    {
      "type": "select",
      "id": "policies_padding_preset",
      "label": "Forhåndsvalg for side-padding",
      "default": "default",
      "options": [
        {
          "value": "default",
          "label": "Standard (12px)"
        },
        {
          "value": "compact",
          "label": "Kompakt (60px)"
        },
        {
          "value": "narrow",
          "label": "Smal (120px)"
        },
        {
          "value": "extra_narrow",
          "label": "Ekstra smal (180px)"
        },
        {
          "value": "custom",
          "label": "Egendefinert (bruk slider)"
        }
      ]
    },
    {
      "type": "range",
      "id": "policies_side_padding",
      "label": "Side-padding (egendefinert verdi)",
      "min": 0,
      "max": 240,
      "step": 4,
      "unit": "px",
      "default": 12,
      "info": "Brukes når \"Egendefinert\" er valgt over."
    },
    {
      "type": "range",
      "id": "policies_side_padding_mobile",
      "label": "Side-padding på mobil",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "default": 24
    },
    {
      "type": "range",
      "id": "policy_font_size_desktop",
      "label": "Policy skriftstørrelse (desktop)",
      "min": 10,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 14
    },
    {
      "type": "range",
      "id": "policy_font_size_mobile",
      "label": "Policy skriftstørrelse (mobil)",
      "min": 10,
      "max": 24,
      "step": 1,
      "unit": "px",
      "default": 12
    },
    {
      "type": "range",
      "id": "policy_gap_desktop",
      "label": "Avstand mellom policies (desktop)",
      "min": 4,
      "max": 48,
      "step": 1,
      "unit": "px",
      "default": 10
    },
    {
      "type": "range",
      "id": "policy_gap_mobile",
      "label": "Avstand mellom policies (mobil)",
      "min": 2,
      "max": 48,
      "step": 1,
      "unit": "px",
      "default": 8
    },
    {
      "type": "range",
      "id": "copyright_top_margin",
      "label": "Avstand før opphavsrett",
      "min": 10,
      "max": 60,
      "step": 2,
      "unit": "px",
      "default": 24
    },
    {
      "type": "text",
      "id": "copyright_text",
      "label": "Egendefinert opphavsrettstekst"
    },
    {
      "type": "text",
      "id": "newsletter_success_fallback",
      "label": "Standard suksessmelding",
      "default": "Tusen takk! Sjekk innboksen din."
    }
  ],
  "blocks": [
    {
      "type": "newsletter_block",
      "name": "Nyhetsbrev",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Overskrift",
          "default": "Bli med i klubben!"
        },
        {
          "type": "range",
          "id": "heading_font_size",
          "label": "Skriftstørrelse overskrift",
          "min": 16,
          "max": 48,
          "step": 1,
          "unit": "px",
          "default": 28
        },
        {
          "type": "richtext",
          "id": "description",
          "label": "Beskrivelse",
          "default": "<p>Meld deg på Kul Kid-klubben og få eksklusive fordeler, lanseringer og tilbud rett i innboksen.</p>"
        },
        {
          "type": "range",
          "id": "description_font_size",
          "label": "Skriftstørrelse beskrivelse",
          "min": 14,
          "max": 26,
          "step": 1,
          "unit": "px",
          "default": 16
        },
        {
          "type": "image_picker",
          "id": "club_icon",
          "label": "Klubbikon"
        },
        {
          "type": "text",
          "id": "club_icon_alt",
          "label": "Alt-tekst for ikon",
          "default": "Kul Kid klubbikon"
        },
        {
          "type": "range",
          "id": "club_icon_width",
          "label": "Maks bredde på ikon",
          "min": 80,
          "max": 240,
          "step": 10,
          "unit": "px",
          "default": 160
        },
        {
          "type": "range",
          "id": "newsletter_form_max_width",
          "label": "Maks bredde på inputfelt",
          "min": 360,
          "max": 720,
          "step": 10,
          "unit": "px",
          "default": 520
        },
        {
          "type": "range",
          "id": "club_icon_width_mobile",
          "label": "Maks bredde på ikon (mobil)",
          "min": 80,
          "max": 240,
          "step": 10,
          "unit": "px",
          "default": 140
        },
        {
          "type": "range",
          "id": "newsletter_padding_top",
          "label": "Topp-padding (px)",
          "min": 0,
          "max": 100,
          "step": 4,
          "default": 24
        },
        {
          "type": "range",
          "id": "newsletter_padding_bottom",
          "label": "Bunn-padding (px)",
          "min": 0,
          "max": 100,
          "step": 4,
          "default": 24
        },
        {
          "type": "range",
          "id": "newsletter_padding_side",
          "label": "Side-padding (px)",
          "min": 0,
          "max": 100,
          "step": 4,
          "default": 24
        },
        {
          "type": "range",
          "id": "action_spacing_desktop",
          "label": "Avstand over skjema (desktop)",
          "min": 0,
          "max": 80,
          "step": 2,
          "unit": "px",
          "default": 16
        },
        {
          "type": "range",
          "id": "action_spacing_mobile",
          "label": "Avstand over skjema (mobil)",
          "min": 0,
          "max": 80,
          "step": 2,
          "unit": "px",
          "default": 12
        },
        {
          "type": "text",
          "id": "email_placeholder",
          "label": "Plassholder for e-post",
          "default": "Din e-postadresse"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Knappetekst",
          "default": "Få 15% nå"
        },
        {
          "type": "range",
          "id": "button_font_size",
          "label": "Skriftstørrelse knapp",
          "min": 12,
          "max": 24,
          "step": 1,
          "unit": "px",
          "default": 15
        },
        {
          "type": "text",
          "id": "success_message",
          "label": "Suksessmelding",
          "default": "Tusen takk! Sjekk innboksen din."
        }
      ]
    },
    {
      "type": "link_group",
      "name": "Lenkegruppe",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Overskrift",
          "default": "Om Kul Kid"
        },
        {
          "type": "range",
          "id": "heading_size",
          "label": "Skriftstørrelse overskrift",
          "min": 14,
          "max": 36,
          "step": 1,
          "unit": "px",
          "default": 20
        },
        {
          "type": "range",
          "id": "link_size",
          "label": "Skriftstørrelse lenker",
          "min": 12,
          "max": 24,
          "step": 1,
          "unit": "px",
          "default": 15
        },
        {
          "type": "range",
          "id": "link_spacing",
          "label": "Linjeavstand",
          "min": 4,
          "max": 32,
          "step": 1,
          "unit": "px",
          "default": 12
        },
        {
          "type": "link_list",
          "id": "menu",
          "label": "Navigasjonsmeny"
        },
        {
          "type": "checkbox",
          "id": "show_all_collections",
          "label": "Vis kolleksjoner når meny mangler",
          "default": false
        },
        {
          "type": "range",
          "id": "collection_limit",
          "label": "Antall kolleksjoner",
          "min": 3,
          "max": 12,
          "step": 1,
          "default": 6
        },
        {
          "type": "text",
          "id": "view_all_label",
          "label": "Lenketekst for \"Se alle\""
        },
        {
          "type": "url",
          "id": "view_all_url",
          "label": "Lenke for \"Se alle\""
        }
      ]
    },
    {
      "type": "social_icons",
      "name": "Sosiale ikoner",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Overskrift",
          "default": "Følg oss"
        },
        {
          "type": "range",
          "id": "heading_size",
          "label": "Skriftstørrelse overskrift",
          "min": 14,
          "max": 36,
          "step": 1,
          "unit": "px",
          "default": 20
        },
        {
          "type": "url",
          "id": "instagram_url",
          "label": "Instagram-lenke"
        },
        {
          "type": "image_picker",
          "id": "instagram_icon",
          "label": "Eget Instagram-ikon"
        },
        {
          "type": "url",
          "id": "facebook_url",
          "label": "Facebook-lenke"
        },
        {
          "type": "image_picker",
          "id": "facebook_icon",
          "label": "Eget Facebook-ikon"
        },
        {
          "type": "url",
          "id": "tiktok_url",
          "label": "TikTok-lenke"
        },
        {
          "type": "image_picker",
          "id": "tiktok_icon",
          "label": "Eget TikTok-ikon"
        },
        {
          "type": "url",
          "id": "spotify_url",
          "label": "Spotify-lenke"
        },
        {
          "type": "image_picker",
          "id": "spotify_icon",
          "label": "Eget Spotify-ikon"
        },
        {
          "type": "url",
          "id": "youtube_link",
          "label": "YouTube-lenke"
        },
        {
          "type": "image_picker",
          "id": "youtube_icon",
          "label": "Eget YouTube-ikon"
        },
        {
          "type": "range",
          "id": "social_icon_size",
          "label": "Ikonstørrelse",
          "min": 16,
          "max": 48,
          "step": 2,
          "unit": "px",
          "default": 28
        },
        {
          "type": "range",
          "id": "social_icon_gap",
          "label": "Avstand mellom ikoner",
          "min": 0,
          "max": 40,
          "step": 2,
          "unit": "px",
          "default": 12
        },
        {
          "type": "range",
          "id": "social_icon_size_mobile",
          "label": "Ikonstørrelse (mobil)",
          "min": 12,
          "max": 40,
          "step": 2,
          "unit": "px",
          "default": 24
        },
        {
          "type": "range",
          "id": "social_icon_gap_mobile",
          "label": "Avstand mellom ikoner (mobil)",
          "min": 0,
          "max": 32,
          "step": 2,
          "unit": "px",
          "default": 10
        },
        {
          "type": "range",
          "id": "social_spacing_bottom",
          "label": "Ekstra avstand under blokk",
          "min": 0,
          "max": 120,
          "step": 4,
          "unit": "px",
          "default": 32
        }
      ]
    },
    {
      "type": "social_icon",
      "name": "Sosialt ikon",
      "settings": [
        {
          "type": "select",
          "id": "platform",
          "label": "Plattform",
          "options": [
            { "value": "instagram", "label": "Instagram" },
            { "value": "facebook", "label": "Facebook" },
            { "value": "tiktok", "label": "TikTok" },
            { "value": "spotify", "label": "Spotify" },
            { "value": "youtube", "label": "YouTube" },
            { "value": "custom", "label": "Annen plattform" }
          ],
          "default": "instagram"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Lenke"
        },
        {
          "type": "image_picker",
          "id": "custom_icon",
          "label": "Eget ikon (valgfritt)"
        },
        {
          "type": "checkbox",
          "id": "enable_gradient",
          "label": "Bruk fargegradient ved hover",
          "default": true
        }
      ]
    },
    {
      "type": "payments",
      "name": "Betalingsikoner",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Overskrift",
          "default": "Vi aksepterer"
        },
        {
          "type": "range",
          "id": "heading_size",
          "label": "Skriftstørrelse overskrift",
          "min": 14,
          "max": 36,
          "step": 1,
          "unit": "px",
          "default": 20
        },
        {
          "type": "range",
          "id": "icon_height",
          "label": "Høyde på ikoner",
          "min": 12,
          "max": 48,
          "step": 2,
          "unit": "px",
          "default": 28
        },
        {
          "type": "range",
          "id": "icon_height_mobile",
          "label": "Høyde på ikoner (mobil)",
          "min": 10,
          "max": 40,
          "step": 2,
          "unit": "px",
          "default": 24
        },
        {
          "type": "range",
          "id": "payments_icon_gap",
          "label": "Avstand mellom ikoner",
          "min": 0,
          "max": 40,
          "step": 2,
          "unit": "px",
          "default": 12
        },
        {
          "type": "range",
          "id": "payments_icon_gap_mobile",
          "label": "Avstand mellom ikoner (mobil)",
          "min": 0,
          "max": 32,
          "step": 2,
          "unit": "px",
          "default": 10
        },
        {
          "type": "checkbox",
          "id": "show_visa",
          "label": "Vis Visa",
          "default": true
        },
        {
          "type": "image_picker",
          "id": "visa_icon",
          "label": "Eget Visa-ikon"
        },
        {
          "type": "checkbox",
          "id": "show_mastercard",
          "label": "Vis Mastercard",
          "default": true
        },
        {
          "type": "image_picker",
          "id": "mastercard_icon",
          "label": "Eget Mastercard-ikon"
        },
        {
          "type": "checkbox",
          "id": "show_amex",
          "label": "Vis American Express",
          "default": true
        },
        {
          "type": "image_picker",
          "id": "amex_icon",
          "label": "Eget American Express-ikon"
        },
        {
          "type": "checkbox",
          "id": "show_paypal",
          "label": "Vis PayPal",
          "default": true
        },
        {
          "type": "image_picker",
          "id": "paypal_icon",
          "label": "Eget PayPal-ikon"
        },
        {
          "type": "checkbox",
          "id": "show_apple_pay",
          "label": "Vis Apple Pay",
          "default": true
        },
        {
          "type": "image_picker",
          "id": "apple_pay_icon",
          "label": "Eget Apple Pay-ikon"
        },
        {
          "type": "checkbox",
          "id": "show_klarna",
          "label": "Vis Klarna",
          "default": true
        },
        {
          "type": "image_picker",
          "id": "klarna_icon",
          "label": "Eget Klarna-ikon"
        },
        {
          "type": "image_picker",
          "id": "custom_payment_svg",
          "label": "Ekstra betalingsikon"
        },
        {
          "type": "text",
          "id": "custom_payment_label",
          "label": "Alt-tekst for ekstra ikon"
        },
        {
          "type": "range",
          "id": "payments_spacing_bottom",
          "label": "Avstand under ikoner",
          "min": 0,
          "max": 80,
          "step": 2,
          "unit": "px",
          "default": 24
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Kul Kid Main Footer",
      "blocks": [
        {
          "type": "newsletter_block"
        },
        {
          "type": "link_group",
          "settings": {
            "heading": "Om Kul Kid"
          }
        },
        {
          "type": "link_group",
          "settings": {
            "heading": "Kategorier",
            "show_all_collections": true,
            "collection_limit": 6,
            "view_all_label": "Se alle kategoriene",
            "view_all_url": "/collections"
          }
        },
        {
          "type": "link_group",
          "settings": {
            "heading": "Hjelp & Service"
          }
        },
        {
          "type": "social_icons"
        },
        {
          "type": "social_icon",
          "settings": {
            "platform": "instagram"
          }
        },
        {
          "type": "social_icon",
          "settings": {
            "platform": "facebook"
          }
        },
        {
          "type": "social_icon",
          "settings": {
            "platform": "tiktok"
          }
        },
        {
          "type": "social_icon",
          "settings": {
            "platform": "spotify"
          }
        },
        {
          "type": "social_icon",
          "settings": {
            "platform": "youtube"
          }
        },
        {
          "type": "payments"
        }
      ]
    }
  ]
}
{% endschema %}
