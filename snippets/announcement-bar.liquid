{% comment %}
  KUL KID Announcement Bar
  - Black text (Luckiest Guy font) with rainbow gradient wave overlay
  - Controlled via schema in parent section
{% endcomment %}

{%- liquid
  assign show_motion = motion | default: true
  assign intensity_level = intensity | default: 'normal'
  assign text_width = width | default: 80
  assign font_size_val = font_size | default: 16
-%}

<div class="kk-announcement-bar" data-motion="{{ show_motion }}" style="--kk-text-width: {{ text_width }}%; --kk-font-size: {{ font_size_val }}px;">
  <p class="kk-announcement-text" data-intensity="{{ intensity_level }}">
    {{ text | default: 'Announcement text' | escape }}
  </p>
</div>

<style>
  .kk-announcement-bar {
    text-align: center;
    padding: 0.75rem 1rem;
    overflow: hidden;
  }

  .kk-announcement-text {
    display: inline-block;
    margin: 0 auto;
    max-width: var(--kk-text-width, 80%);
    font-family: 'Luckiest Guy', cursive;
    font-weight: 400;
    font-size: var(--kk-font-size, 16px);
    letter-spacing: 0.5px;
    text-transform: uppercase;
    background: linear-gradient(to right, #000 0%, #000 100%);
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    color: transparent;
  }

  /* Rainbow gradient sweep */
  .kk-announcement-bar[data-motion='true'] .kk-announcement-text {
    background: linear-gradient(
      90deg,
      #000 0%,
      #000 30%,
      #ff5c5c 35%,
      #ffb347 40%,
      #f9f871 45%,
      #6ee7b7 50%,
      #60a5fa 55%,
      #c084fc 60%,
      #f472b6 65%,
      #000 70%,
      #000 100%
    );
    background-size: 300% 100%;
    background-clip: text;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: kk-rainbow-sweep 20s linear infinite;
  }

  @keyframes kk-rainbow-sweep {
    0% {
      background-position: 300% 0%;
    }
    100% {
      background-position: -300% 0%;
    }
  }


  /* Intensity variants */
  .kk-announcement-text[data-intensity='soft'] {
    filter: brightness(0.95) saturate(0.8);
  }

  .kk-announcement-text[data-intensity='bold'] {
    filter: brightness(1.1) saturate(1.3);
  }

  /* Respect user motion preferences */
  @media (prefers-reduced-motion: reduce) {
    .kk-announcement-bar[data-motion='true'] .kk-announcement-text {
      animation: none !important;
      background: linear-gradient(to right, #000 0%, #000 100%);
      background-clip: text;
      -webkit-background-clip: text;
    }
  }
</style>
